(this["webpackJsonpfoodstore-ui"]=this["webpackJsonpfoodstore-ui"]||[]).push([[0],{164:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(30),s=a.n(c),i=(a(98),a(10)),o=a(14),u=(a(99),[{icon:"/images/menus/semua.png",label:"semua",id:""},{icon:"/images/menus/utama.png",label:"utama",id:"utama"},{icon:"/images/menus/minuman.png",label:"minuman",id:"minuman"},{icon:"/images/menus/snack.png",label:"snack",id:"snack"},{icon:"/images/menus/pastry.png",label:"pastry",id:"pastry"}]),l={"":[],utama:["burger","pizza","bread"],pastry:["cheese","strawberry","muffin"],snack:["fried","bread","cheese","coffee"],minuman:["coffee","tea","hot","cold"]},j=a(82);a.n(j).a.config();var d="http://localhost:3000",b="Andre Store",m="2000",h="Andre William",p="andre.williamyuw@gmail.com",O={account_no:"4400087984",bank_name:"BCA"},x=a(2),f=a(1);function g(){return Object(f.jsx)(i.b,{to:"/",children:Object(f.jsx)("div",{className:"text-red-600 font-bold text-4xl",children:b})})}var v=a(17),k=a(83),y=a.n(k);function w(){var e,t=Object(v.c)((function(e){return e.auth}));return Object(f.jsxs)(x.n,{desktop:2,justify:"between",items:"center",children:[Object(f.jsx)("div",{children:Object(f.jsx)(g,{})}),Object(f.jsx)("div",{className:"mr-5 text-right",children:Object(f.jsxs)(i.b,{to:(null===t||void 0===t?void 0:t.user)?"/account":"/login",children:[Object(f.jsx)("div",{className:"mr-2 inline-block text-red-600 font-bold",children:(null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.full_name)||"Login"}),Object(f.jsx)(x.c,{icon:Object(f.jsx)(y.a,{})})]})})]})}var S=a(35),_=a.n(S),P=a(55),N=a.n(P);function C(e){return e.reduce((function(e,t){return e+t.price*t.qty}),0)}function I(e){return isNaN(parseInt(e))?"":new Intl.NumberFormat("id-ID",{maximumSignificantDigits:2,style:"currency",currency:"IDR"}).format(e)}function E(e){var t=e.items,a=e.onItemInc,r=e.onItemDec,n=e.onCheckout,c=C(t);return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"px-2 border-b mt-5 pb-5",children:[Object(f.jsxs)("div",{className:"text-3xl flex items-center text-red-700 my-2",children:[Object(f.jsx)(N.a,{}),Object(f.jsx)("div",{className:"ml-2",children:"Keranjang"})]}),Object(f.jsxs)(x.s,{as:"h5",children:["Total: ",I(c)]}),Object(f.jsx)(x.b,{text:"Checkout",fitContainer:!0,iconAfter:Object(f.jsx)(_.a,{}),disabled:!t.length,onClick:n})]}),t.length?null:Object(f.jsx)("div",{className:"text-center text-sm text-red-900",children:"Belum ada items di keranjang"}),Object(f.jsx)("div",{className:"p-2",children:t.map((function(e,t){return Object(f.jsx)("div",{className:"mb-2",children:Object(f.jsx)(x.e,{imgUrl:"".concat(d,"/upload/").concat(e.image_url),name:e.name,qty:e.qty,color:"orange",onInc:function(){return a(e)},onDec:function(t){return r(e)}})},t)}))})]})}var T=a(4),q=a.n(T),L=a(7),A="features/Products/START_FETCHING_PRODUCT",B="features/Products/ERROR_FETCHING_PRODUCT",D="features/Products/SUCCESS_FETCHING_PRODUCT",M="features/Products/SET_PAGE",H="features/Products/SET_KEYWORD",z="features/Products/SET_CATEGORY",R="features/Products/SET_TAGS",J="features/Products/NEXT_PAGE",K="features/Products/PREV_PAGE",G="features/Products/TOGGLE_TAG",U=a(15),F=a.n(U);function V(){return(V=Object(L.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get("".concat(d,"/api/products"),{params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=a(84),W=a.n(X)()((function(e){return V.apply(this,arguments)}),1e3),Y=function(){return{type:A}},$=function(){return{type:B}},Q=function(e){var t=e.data,a=e.count;return{type:D,data:t,count:a}},Z="features/Cart/ADD_ITEM",ee="features/Cart/REMOVE_ITEM",te="features/Cart/CLEAR_ITEMS",ae="features/Cart/SET_ITEMS";function re(e){return{type:Z,item:e}}function ne(){return{type:te}}function ce(e){return{type:ae,items:e}}var se=a(61),ie=a.n(se);function oe(){var e=Object(v.b)(),t=Object(v.c)((function(e){return e.products})),a=Object(v.c)((function(e){return e.cart})),n=Object(o.g)();return r.useEffect((function(){e(function(){var e=Object(L.a)(q.a.mark((function e(t,a){var r,n,c,s,i,o,u,l,j,d;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(Y()),r=a().products.perPage||9,n=a().products.currentPage||1,c=a().products.tags||[],s=a().products.keyword||"",i=a().products.category||"",o={limit:r,skip:n*r-r,q:s,tags:c,category:i},e.next=10,W(o);case 10:u=e.sent,l=u.data,j=l.data,d=l.count,t(Q({data:j,count:d})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),t($);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,a){return e.apply(this,arguments)}}())}),[e,t.currentPage,t.keyword,t.category,t.tags]),Object(f.jsx)("div",{children:Object(f.jsx)(x.k,{sidebar:Object(f.jsx)(x.p,{items:u,verticalAlign:"top",active:t.category,onChange:function(t){return e(function(e){return{type:z,category:e}}(t))}}),content:Object(f.jsxs)("div",{className:"md:flex md:flex-row-reverse w-full mr-5 h-full min-h-screen",children:[Object(f.jsxs)("div",{className:"w-full md:w-3/4 pl-5 pb-10",children:[Object(f.jsx)("div",{className:"w-full text-center mb-10 mt-5",children:Object(f.jsx)(x.i,{fullRound:!0,value:t.keyword,placeholder:"cari makanan favoritmu",fitContainer:!0,onChange:function(t){var a;e((a=t.target.value,{type:H,keyword:a}))}})}),Object(f.jsx)(w,{}),Object(f.jsx)("div",{className:"mb-5 pl-2 flex w-auto overflow-auto pb-5",children:l[t.category].map((function(a,r){return Object(f.jsx)("div",{children:Object(f.jsx)(x.m,{text:a,onClick:function(t){return e(function(e){return{type:G,tag:e}}(a))},isActive:t.tags.includes(a),icon:a.slice(0,1).toUpperCase()})},r)}))}),"process"!==t.status||t.data.length?null:Object(f.jsx)("div",{className:"flex justify-center",children:Object(f.jsx)(ie.a,{color:"red"})}),Object(f.jsx)(x.n,{desktop:3,items:"stretch",children:t.data.map((function(t,a){return Object(f.jsx)("div",{className:"p-2",children:Object(f.jsx)(x.f,{title:t.name,imgUrl:"".concat(d,"/upload/").concat(t.image_url),price:t.price,onAddToCart:function(a){return e(re(t))}})},a)}))}),Object(f.jsx)("div",{className:"text-center my-10",children:Object(f.jsx)(x.l,{totalItems:t.totalItems,page:t.currentPage,perPage:t.perPage,onChange:function(t){return e(function(){return{type:M,currentPage:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}}(t))},onNext:function(t){return e({type:J})},onPrev:function(t){return e({type:K})}})})]}),Object(f.jsx)("div",{className:"w-full md:w-1/4 h-full shadow-lg border-r border-white bg-gray-100 ".concat(a.length?"":"flex items-center justify-center"),children:Object(f.jsx)(E,{items:a,onItemInc:function(t){return e(re(t))},onItemDec:function(t){return e(function(e){return{type:ee,item:e}}(t))},onCheckout:function(e){return n.push("/checkout")}})})]}),sidebarSize:80})})}var ue=a(6),le=a(9),je=a(41),de={required:{value:!0,message:"Nama lengkap harus diisi."},maxLength:{value:500,message:"Panjang nama lengkap maksimal 500 karakter"}},be={required:{value:!0,message:"Email harus diisi."},maxLength:{value:255,message:"Panjang email maksimal 255 karakter"},pattern:{value:/^([\w-.]+@([\w-]+.)+[\w-]{2,4})?$/,message:"Email tidak valid"}},me={required:{value:!0,message:"Password harus diisi"},maxLength:{value:255,message:"Panjang password maksimal 255 karakter"}},he={required:{value:!0,message:"Konfirmasi password harus diisi"}};function pe(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(L.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.post("".concat(d,"/auth/register"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e,t){return fe.apply(this,arguments)}function fe(){return(fe=Object(L.a)(q.a.mark((function e(t,a){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.post("".concat(d,"/auth/login"),{email:t,password:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(){return(ge=Object(L.a)(q.a.mark((function e(){var t,a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},a=t.token,e.next=3,F.a.post("".concat(d,"/auth/logout"),null,{headers:{authorization:"Bearer ".concat(a)}}).then((function(e){return localStorage.removeItem("auth"),e})).catch((function(e){return console.log(e),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ve="idle",ke="process",ye="success",we="error";function Se(){var e,t,a,n,c=Object(je.a)({mode:"all"}),s=c.register,u=c.handleSubmit,l=c.formState.errors,j=c.setError,d=r.useState(ve),b=Object(le.a)(d,2),m=b[0],h=b[1],p=Object(o.g)(),O=function(){var e=Object(L.a)(q.a.mark((function e(t){var a,r,n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.password,r=t.password_confirmation,a===r){e.next=4;break}return j("password_confirmation",{type:"equality",message:"Konfirmasi password harus sama dengan password"}),e.abrupt("return");case 4:return h(ke),e.next=7,pe(t);case 7:if(!(n=e.sent).data.error){e.next=13;break}return Object.keys(n.data.fields).forEach((function(e){var t,a;j(e,{type:"server",message:null===(t=n.data.fields[e])||void 0===t||null===(a=t.properties)||void 0===a?void 0:a.message})})),h(we),e.abrupt("return");case 13:h(ye),p.push("/register/berhasil");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)(x.j,{size:"small",children:Object(f.jsxs)(x.d,{color:"white",children:[Object(f.jsx)("div",{className:"text-center mb-5",children:Object(f.jsx)(g,{})}),Object(f.jsxs)("form",{onSubmit:u(O),children:[Object(f.jsx)(x.g,{errorMessage:null===(e=l.full_name)||void 0===e?void 0:e.message,children:Object(f.jsx)(x.i,Object(ue.a)({name:"full_name",placeholder:"Nama Lengkap",fitContainer:!0},s("full_name",de)))}),Object(f.jsx)(x.g,{errorMessage:null===(t=l.email)||void 0===t?void 0:t.message,children:Object(f.jsx)(x.i,Object(ue.a)({name:"email",placeholder:"Email",fitContainer:!0},s("email",be)))}),Object(f.jsx)(x.g,{errorMessage:null===(a=l.password)||void 0===a?void 0:a.message,children:Object(f.jsx)(x.h,Object(ue.a)({name:"password",placeholder:"Password",fitContainer:!0},s("password",me)))}),Object(f.jsx)(x.g,{errorMessage:null===(n=l.password_confirmation)||void 0===n?void 0:n.message,children:Object(f.jsx)(x.h,Object(ue.a)({name:"password_confirmation",placeholder:"Konfirmasi Password",fitContainer:!0},s("password_confirmation",he)))}),Object(f.jsx)(x.b,{size:"large",fitContainer:!0,disabled:m===ke,children:m===ke?"Sedang memproses":"Mendaftar"})]}),Object(f.jsxs)("div",{className:"text-center mt-2",children:["Sudah punya akun? ",Object(f.jsx)(i.b,{to:"/login",children:Object(f.jsx)("b",{children:"Masuk Sekarang"})})]})]})})}function _e(){return Object(f.jsx)(x.j,{size:"small",children:Object(f.jsx)(x.d,{color:"white",children:Object(f.jsxs)("div",{className:"text-center",children:[Object(f.jsx)(x.s,{as:"h3",children:"Pendaftaran Berhasil"}),Object(f.jsx)(x.s,{children:"Silahkan masuk ke aplikasi"}),Object(f.jsx)("br",{}),Object(f.jsx)(i.b,{to:"/login",children:Object(f.jsx)(x.b,{fitContainer:!0,children:"Masuk"})})]})})})}var Pe={required:{value:!0,message:"Email tidak boleh kosong"},maxLength:{value:255,message:"Panjang email maksimal 255 karakter"}},Ne={required:{value:!0,message:"Password tidak boleh kosong"},maxLength:{value:255,message:"Panjang password maksimal 255 karakter"}},Ce="features/Auth/USER_LOGIN",Ie="features/Auth/USER_LOGOUT";function Ee(e,t){return{type:Ce,user:e,token:t}}function Te(){return{type:Ie}}var qe="idle",Le="process",Ae="success",Be="error";function De(){var e,t,a=Object(je.a)(),n=a.register,c=a.handleSubmit,s=a.formState.errors,u=a.setError,l=r.useState(qe),j=Object(le.a)(l,2),d=j[0],b=j[1],m=Object(v.b)(),h=Object(o.g)(),p=function(){var e=Object(L.a)(q.a.mark((function e(t){var a,r,n,c,s,i;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,r=t.password,b(Le),e.next=4,xe(a,r);case 4:if(n=e.sent,!(c=n.data).error){e.next=12;break}return u("password",{type:"invalidCredential",message:c.message}),b(Be),e.abrupt("return");case 12:s=c.user,i=c.token,m(Ee(s,i)),h.push("/");case 15:b(Ae);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(x.j,{size:"small",children:[Object(f.jsx)("br",{}),Object(f.jsxs)(x.d,{color:"white",children:[Object(f.jsx)("div",{className:"text-center mb-5",children:Object(f.jsx)(g,{})}),Object(f.jsxs)("form",{onSubmit:c(p),children:[Object(f.jsx)(x.g,{errorMessage:null===(e=s.email)||void 0===e?void 0:e.message,children:Object(f.jsx)(x.i,Object(ue.a)({placeholder:"Email",fitContainer:!0,name:"email"},n("email",Pe)))}),Object(f.jsx)(x.g,{errorMessage:null===(t=s.password)||void 0===t?void 0:t.message,children:Object(f.jsx)(x.h,Object(ue.a)({placeholder:"Password",name:"password",fitContainer:!0},n("password",Ne)))}),Object(f.jsx)(x.b,{fitContainer:!0,size:"large",disabled:d===Le,children:"Login"})]}),Object(f.jsxs)("div",{className:"text-center mt-2",children:["Belum punya akun? ",Object(f.jsx)(i.b,{to:"/register",children:Object(f.jsx)("b",{children:"Daftar Sekarang"})})]})]})]})}var Me={required:{value:!0,message:"Nama alamat tidak boleh kosong"},maxLength:{value:500,message:"Panjang nama alamat maksimal 500 karakter"},minLength:{value:5,message:"Panjang nama alamat minimal 5 karakter"}},He={required:{value:!0,message:"Provinsi harus dipilih"}},ze={required:{value:!0,message:"Kabupaten harus dipilih"}},Re={required:{value:!0,message:"Kecamatan harus dipilih"}},Je={required:{value:!0,message:"Kelurahan harus dipilih"}},Ke={required:{value:!0,message:"Detail alamat harus diisi"},maxLength:{value:1e3,message:"Panjang detail alamat maksimal 1000 karakter"}};function Ge(e){var t=e.tingkat,a=e.kodeInduk,n=e.onChange,c=e.value,s=r.useState([]),i=Object(le.a)(s,2),o=i[0],u=i[1],l=r.useState(!1),j=Object(le.a)(l,2),b=j[0],m=j[1];return r.useEffect((function(){m(!0),F.a.get("".concat(d,"/api/wilayah/").concat(t,"?kode_induk=").concat(a)).then((function(e){var t=e.data;u(t)})).finally((function(e){return m(!1)}))}),[a,t]),Object(f.jsx)(x.o,{options:o.map((function(e){return{label:e.nama,value:e.kode}})),onChange:n,value:c,isLoading:b,isDisabled:b||!o.length})}function Ue(e){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(L.a)(q.a.mark((function e(t){var a,r,n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,n=t.page*t.limit-t.limit,e.next=4,F.a.get("".concat(d,"/api/delivery-addresses"),{params:{limit:t.limit,skip:n},headers:{authorization:"Bearer ".concat(r)}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(L.a)(q.a.mark((function e(t){var a,r;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,e.next=3,F.a.post("".concat(d,"/api/delivery-addresses"),t,{headers:{authorization:"Bearer ".concat(r)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(){var e,t,a,n,c,s,i,u,l,j=Object(o.g)(),d=Object(je.a)(),b=d.handleSubmit,m=d.register,h=d.setValue,p=d.getValues,O=d.watch,g=d.formState.errors,v=O();r.useEffect((function(){m("provinsi",He),m("kabupaten",ze),m("kecamatan",Re),m("kelurahan",Je)}),[m]),r.useEffect((function(){h("kabupaten",null),h("kecamatan",null),h("kelurahan",null)}),[v.provinsi,h]),r.useEffect((function(){h("kecamatan",null),h("kelurahan",null)}),[v.kabupaten,h]),r.useEffect((function(){h("kelurahan",null)}),[v.kecamatan,h]);var k=function(e,t){h(e,t,{shouldDirty:!0,shouldValidate:!0})},y=function(){var e=Object(L.a)(q.a.mark((function e(t){var a,r;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={nama:t.nama_alamat,detail:t.detail_alamat,provinsi:t.provinsi.label,kabupaten:t.kabupaten.label,kecamatan:t.kecamatan.label,kelurahan:t.kelurahan.label},e.next=3,Ve(a);case 3:if(r=e.sent,!r.data.error){e.next=7;break}return e.abrupt("return");case 7:j.push("/alamat-pengiriman");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(x.j,{children:[Object(f.jsx)(w,{}),Object(f.jsx)("br",{}),Object(f.jsx)("div",{children:Object(f.jsxs)("form",{onSubmit:b(y),children:[Object(f.jsx)(x.g,{label:"Nama Alamat",errorMessage:null===(e=g.nama_alamat)||void 0===e?void 0:e.message,color:"black",children:Object(f.jsx)(x.i,Object(ue.a)({placeholder:"Nama Alamat",fitContainer:!0},m("nama_alamat",Me)))}),Object(f.jsx)(x.g,{label:"Provinsi",errorMessage:null===(t=g.provinsi)||void 0===t?void 0:t.message,color:"black",children:Object(f.jsx)(Ge,{onChange:function(e){return k("provinsi",e)},tingkat:"provinsi",value:p().provinsi})}),Object(f.jsx)(x.g,{label:"Kabupaten/kota",errorMessage:null===(a=g.kabupaten)||void 0===a?void 0:a.message,color:"black",children:Object(f.jsx)(Ge,{onChange:function(e){return k("kabupaten",e)},kodeInduk:null===(n=p().provinsi)||void 0===n?void 0:n.value,tingkat:"kabupaten",value:p().kabupaten})}),Object(f.jsx)(x.g,{label:"Kecamatan",errorMessage:null===(c=g.kecamatan)||void 0===c?void 0:c.message,color:"black",children:Object(f.jsx)(Ge,{onChange:function(e){return k("kecamatan",e)},kodeInduk:null===(s=p().kabupaten)||void 0===s?void 0:s.value,tingkat:"kecamatan",value:p().kecamatan})}),Object(f.jsx)(x.g,{label:"Kelurahan",errorMessage:null===(i=g.kelurahan)||void 0===i?void 0:i.message,color:"black",children:Object(f.jsx)(Ge,{onChange:function(e){return k("kelurahan",e)},kodeInduk:null===(u=p().kecamatan)||void 0===u?void 0:u.value,tingkat:"desa",value:p().kelurahan})}),Object(f.jsx)(x.g,{label:"Detail Alamat",errorMessage:null===(l=g.detail_alamat)||void 0===l?void 0:l.message,color:"black",children:Object(f.jsx)(x.t,Object(ue.a)({placeholder:"Detail alamat",fitContainer:!0},m("detail_alamat",Ke)))}),Object(f.jsx)(x.b,{fitContainer:!0,children:"Simpan"})]})})]})}Ge.defaultProps={tingkat:"provinsi"};var Ye="idle",$e="process",Qe="success",Ze="error";function et(){var e=r.useState([]),t=Object(le.a)(e,2),a=t[0],n=t[1],c=r.useState(0),s=Object(le.a)(c,2),i=s[0],o=s[1],u=r.useState(Ye),l=Object(le.a)(u,2),j=l[0],d=l[1],b=r.useState(1),m=Object(le.a)(b,2),h=m[0],p=m[1],O=r.useState(10),x=Object(le.a)(O,2),f=x[0],g=x[1],v=r.useCallback(Object(L.a)(q.a.mark((function e(){var t,a,r,c;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d($e),e.next=3,Ue({page:h,limit:f});case 3:if(t=e.sent,a=t.data,r=a.data,c=a.count,!a.error){e.next=11;break}return d(Ze),e.abrupt("return");case 11:d(Qe),n(r),o(c);case 14:case"end":return e.stop()}}),e)}))),[h,f]);return r.useEffect((function(){v()}),[v]),{data:a,count:i,status:j,page:h,limit:f,setPage:p,setLimit:g}}function tt(){var e=et(),t=e.data,a=e.limit,r=e.page,n=e.status,c=e.count,s=e.setPage,o=[{Header:"Nama",accessor:"nama"},{Header:"Detail",accessor:function(e){return Object(f.jsxs)("div",{children:[e.provinsi,", ",e.kabupaten,", ",e.kecamatan,", ",e.kelurahan,Object(f.jsx)("br",{}),e.detail]})}}];return Object(f.jsx)(x.j,{size:"large",children:Object(f.jsxs)("div",{children:[Object(f.jsx)(w,{}),Object(f.jsx)(x.s,{as:"h3",children:"Alamat Pengiriman"}),Object(f.jsx)("br",{}),Object(f.jsx)(i.b,{to:"alamat-pengiriman/tambah",children:Object(f.jsx)(x.b,{children:"Tambah Baru"})}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)(x.r,{items:t,columns:o,totalItems:c,page:r,isLoading:"process"===n,perPage:a,onPageChange:function(e){return s(e)}}),"success"!==n||t.length?null:Object(f.jsxs)("div",{className:"text-center p-10",children:["Kamu belum menambahkan alamat pengiriman.",Object(f.jsx)("br",{}),Object(f.jsx)(i.b,{to:"alamat-pengiriman/tambah",children:Object(f.jsx)("button",{children:"Tambah Baru"})})]})]})})}var at=a(85),rt=a.n(at),nt=a(86),ct=a.n(nt),st=a(87),it=a.n(st),ot=a(88),ut=a.n(ot);function lt(e){return jt.apply(this,arguments)}function jt(){return(jt=Object(L.a)(q.a.mark((function e(t){var a,r,n,c,s;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,n=t.limit,c=t.page,s=c*n-n,e.next=5,F.a.get("".concat(d,"/api/orders"),{params:{limit:n,skip:s},headers:{authorization:"Bearer ".concat(r)}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(e){return bt.apply(this,arguments)}function bt(){return(bt=Object(L.a)(q.a.mark((function e(t){var a,r;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,e.next=3,F.a.post("".concat(d,"/api/orders"),t,{headers:{authorization:"Bearer ".concat(r)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mt=function(e){var t=e.children;return Object(f.jsx)("div",{className:"text-3xl flex justify-center",children:t})},ht=[{label:"Item",icon:Object(f.jsx)(mt,{children:Object(f.jsx)(N.a,{})})},{label:"Alamat",icon:Object(f.jsx)(mt,{children:Object(f.jsx)(rt.a,{})})},{label:"Konfirmasi",icon:Object(f.jsx)(mt,{children:Object(f.jsx)(ct.a,{})})}],pt=[{Header:"Nama produk",accessor:function(e){return Object(f.jsxs)("div",{className:"flex items-center",children:[Object(f.jsx)("img",{src:"".concat(d,"/upload/").concat(e.image_url),width:48,alt:e.name}),e.name]})}},{Header:"Jumlah",accessor:"qty"},{Header:"Harga satuan",id:"price",accessor:function(e){return Object(f.jsxs)("span",{children:["@ ",I(e.price)]})}},{Header:"Harga total",id:"subtotal",accessor:function(e){return Object(f.jsx)("div",{children:I(e.price*e.qty)})}}],Ot=[{Header:"Nama alamat",accessor:function(e){return Object(f.jsxs)("div",{children:[e.nama,Object(f.jsx)("br",{}),Object(f.jsxs)("small",{children:[e.provinsi,", ",e.kabupaten,", ",e.kecamatan,", ",e.kelurahan,Object(f.jsx)("br",{}),e.detail]})]})}}];function xt(){var e=r.useState(0),t=Object(le.a)(e,2),a=t[0],n=t[1],c=Object(v.c)((function(e){return e.cart})),s=et(),u=s.data,l=s.status,j=s.limit,d=s.page,b=s.count,h=s.setPage,p=r.useState(null),O=Object(le.a)(p,2),g=O[0],k=O[1],y=Object(o.g)(),S=Object(v.b)();function P(){return(P=Object(L.a)(q.a.mark((function e(){var t,a,r;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={delivery_fee:m,delivery_address:g._id},e.next=3,dt(t);case 3:if(a=e.sent,!(null===(r=a.data)||void 0===r?void 0:r.error)){e.next=8;break}return console.log(JSON.stringify(r)),e.abrupt("return");case 8:y.push("/invoice/".concat(r._id)),S(ne());case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.length?Object(f.jsxs)(x.j,{children:[Object(f.jsx)(w,{}),Object(f.jsx)(x.s,{as:"h3",children:"Checkout"}),Object(f.jsx)("br",{}),Object(f.jsx)(x.q,{steps:ht,active:a}),0===a?Object(f.jsxs)("div",{children:[Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)(x.r,{items:c,columns:pt,perPage:c.length,showPagination:!1}),Object(f.jsx)("br",{}),Object(f.jsx)("div",{className:"text-right",children:Object(f.jsxs)(x.s,{as:"h4",children:["Subtotal: ",I(C(c))]})}),Object(f.jsx)("br",{}),Object(f.jsx)(x.b,{onClick:function(e){return n(a+1)},color:"red",iconAfter:Object(f.jsx)(_.a,{}),children:"Selanjutnya"})]}):null,1===a?Object(f.jsxs)("div",{children:[Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)(x.r,{items:u,columns:Ot,perPage:j,page:d,onPageChange:function(e){return h(e)},totalItems:b,isLoading:"process"===l,selectable:!0,primaryField:"_id",selectedRow:g,onSelectRow:function(e){return k(e)}}),u.length||"success"!==l?null:Object(f.jsx)("div",{className:"text-center my-10",children:Object(f.jsxs)(i.b,{to:"alamat-pengiriman/tambah",children:["Kamu belum memiliki alamat pengiriman",Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)(x.b,{children:"Tambah alamat"})]})}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsxs)(x.n,{desktop:2,tablet:2,mobile:2,children:[Object(f.jsx)("div",{children:Object(f.jsx)(x.b,{onClick:function(e){return n(a-1)},color:"gray",iconBefore:Object(f.jsx)(it.a,{}),children:"Sebelumnya"})}),Object(f.jsx)("div",{className:"text-right",children:Object(f.jsx)(x.b,{onClick:function(e){return n(a+1)},disabled:!g,iconAfter:Object(f.jsx)(_.a,{}),children:"Selanjutnya"})})]})]}):null,2===a?Object(f.jsxs)("div",{children:[Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)(x.r,{columns:[{Header:"",accessor:"label"},{Header:"",accessor:"value"}],items:[{label:"Alamat",value:Object(f.jsxs)("div",{children:[g.nama,Object(f.jsx)("br",{}),g.provinsi,", ",g.kabupaten,", ",g.kecamatan,", ",g.kelurahan," ",Object(f.jsx)("br",{}),g.detail]})},{label:"Subtotal",value:I(C(c))},{label:"Ongkir",value:I(m)},{label:"Total",value:Object(f.jsx)("b",{children:I(C(c)+parseInt(m))})}],showPagination:!1}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsxs)(x.n,{desktop:2,tablet:2,mobile:2,children:[Object(f.jsx)("div",{children:Object(f.jsx)(x.b,{onClick:function(e){return n(a-1)},color:"gray",iconBefore:Object(f.jsx)(_.a,{}),children:"Sebelumnya"})}),Object(f.jsx)("div",{className:"text-right",children:Object(f.jsx)(x.b,{onClick:function(){return P.apply(this,arguments)},color:"red",size:"large",iconBefore:Object(f.jsx)(ut.a,{}),children:"Bayar"})})]})]}):null]}):Object(f.jsx)(o.a,{to:"/"})}var ft=a(56);function gt(e){switch(e.status){case"waiting_payment":return Object(f.jsx)(x.a,{color:"orange",children:"Menunggu pembayaran"});case"paid":return Object(f.jsx)(x.a,{color:"green",children:"Sudah dibayar"});case"pocessing":return Object(f.jsx)(x.a,{color:"yellow",children:"Sedang diproses"});case"in_delivery":return Object(f.jsx)(x.a,{color:"blue",children:"Dalam pengiriman"});case"delivered":return Object(f.jsx)(x.a,{color:"green",children:"Pesanan diterima"});default:return Object(f.jsx)("div",{})}}function vt(){return(vt=Object(L.a)(q.a.mark((function e(t){var a,r;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,e.next=3,F.a.get("".concat(d,"/api/invoices/").concat(t),{headers:{authorization:"Bearer ".concat(r)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kt(){var e,t,a,n,c,s,i,u,l=r.useState(null),j=Object(le.a)(l,2),b=j[0],m=j[1],g=r.useState(""),v=Object(le.a)(g,2),k=v[0],y=v[1],S=r.useState("process"),_=Object(le.a)(S,2),P=_[0],N=_[1],C=r.useState(!1),E=Object(le.a)(C,2),T=E[0],A=E[1],B=r.useState(!1),D=Object(le.a)(B,2)[1],M=Object(o.h)().params,H=function(){var e=Object(L.a)(q.a.mark((function e(){var t,a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),e.next=3,F.a.get("".concat(d,"/api/invoices/").concat(null===M||void 0===M?void 0:M.order_id,"/initiate_payment"));case 3:if(t=e.sent,a=t.data,console.log(a),a.token){e.next=10;break}return D(!0),alert("error"),e.abrupt("return");case 10:A(!0),window.snap.pay(a.token);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.useEffect((function(){(function(e){return vt.apply(this,arguments)})(null===M||void 0===M?void 0:M.order_id).then((function(e){var t=e.data;(null===t||void 0===t?void 0:t.error)&&y(t.message||"Terjadi kesalahan yang tidak diketahui"),m(t)})).finally((function(){return N("idle")}))}),[M]),k.length?Object(f.jsxs)(x.j,{children:[Object(f.jsx)(w,{}),Object(f.jsx)(x.s,{as:"h3",children:"Terjadi kesalahan"}),k]}):"process"===P?Object(f.jsx)(x.j,{children:Object(f.jsx)("div",{className:"text-center py-10",children:Object(f.jsx)("div",{className:"inline-block",children:Object(f.jsx)(ft.BounceLoader,{color:"red"})})})}):Object(f.jsxs)(x.j,{children:[Object(f.jsx)(w,{}),Object(f.jsx)(x.s,{as:"h3",children:"Invoice"}),Object(f.jsx)("br",{}),Object(f.jsx)(x.r,{showPagination:!1,items:[{label:"Status",value:Object(f.jsx)(gt,{status:null===b||void 0===b?void 0:b.payment_status})},{label:"Order ID",value:"#".concat(null===b||void 0===b||null===(e=b.order)||void 0===e?void 0:e.order_number)},{label:"Total amount",value:I(null===b||void 0===b?void 0:b.total)},{label:"Billed to",value:Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:null===b||void 0===b||null===(t=b.user)||void 0===t?void 0:t.full_name}),Object(f.jsx)("br",{}),null===b||void 0===b||null===(a=b.user)||void 0===a?void 0:a.email,Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),null===b||void 0===b||null===(n=b.delivery_address)||void 0===n?void 0:n.detail,Object(f.jsx)("br",{}),null===b||void 0===b||null===(c=b.delivery_address)||void 0===c?void 0:c.kelurahan,",",null===b||void 0===b||null===(s=b.delivery_address)||void 0===s?void 0:s.kecamatan,Object(f.jsx)("br",{}),null===b||void 0===b||null===(i=b.delivery_address)||void 0===i?void 0:i.kabupaten," ",Object(f.jsx)("br",{}),null===b||void 0===b||null===(u=b.delivery_address)||void 0===u?void 0:u.provinsi]})},{label:"Payment to",value:Object(f.jsxs)("div",{children:[h," ",Object(f.jsx)("br",{}),p," ",Object(f.jsx)("br",{}),O.account_no," ",Object(f.jsx)("br",{}),O.bank_name]})}],columns:[{Header:"Invoice",accessor:"label"},{Header:"",accessor:"value"}]}),"paid"!==b.payment_status?Object(f.jsx)(x.b,{onClick:H,disabled:T,children:T?"Loading...":"Bayar dengan midtrans"}):null]})}var yt=a(89),wt=a.n(yt),St=a(90),_t=a.n(St),Pt=a(91),Nt=a.n(Pt),Ct=function(e){var t=e.children;return Object(f.jsx)("div",{className:"text-white text-5xl flex justify-center mb-5",children:t})},It=[{label:"Beranda",icon:Object(f.jsx)(Ct,{children:Object(f.jsx)(wt.a,{})}),url:"/"},{label:"Alamat",icon:Object(f.jsx)(Ct,{children:Object(f.jsx)(_t.a,{})}),url:"/alamat-pengiriman"},{label:"Pesanan",icon:Object(f.jsx)(Ct,{children:Object(f.jsx)(Nt.a,{})}),url:"/pesanan"},{label:"Logout",icon:Object(f.jsx)(Ct,{children:Object(f.jsx)(_.a,{})}),url:"/logout"}];function Et(){return Object(f.jsxs)(x.j,{children:[Object(f.jsx)(w,{}),Object(f.jsx)(x.s,{as:"h3",children:"Akun anda"}),Object(f.jsx)("br",{}),Object(f.jsx)(x.n,{desktop:4,tablet:4,mobile:2,children:It.map((function(e,t){return Object(f.jsx)("div",{className:"px-2 pb-2",children:Object(f.jsx)(i.b,{to:e.url,children:Object(f.jsx)(x.d,{header:e.icon,body:Object(f.jsx)("div",{className:"text-center font-bold text-white",children:e.label})})})},t)}))})]})}var Tt=a(92),qt=a.n(Tt),Lt=[{Header:"",id:"Status",accessor:function(e){return Object(f.jsxs)("div",{children:["#",e.order_number," ",Object(f.jsx)("br",{}),Object(f.jsx)(gt,{status:e.status})]})}},{Header:"Items",accessor:function(e){return Object(f.jsx)("div",{children:e.order_items.map((function(e){return Object(f.jsxs)("div",{children:[e.name," ",e.qty]},e._id)}))})}},{Header:"Total",accessor:function(e){return Object(f.jsx)("div",{children:I(C(e.order_items)+e.delivery_fee)})}},{Header:"Invoice",accessor:function(e){return Object(f.jsx)("div",{children:Object(f.jsx)(i.b,{to:"/invoice/".concat(e._id),children:Object(f.jsx)(x.b,{color:"gray",iconBefore:Object(f.jsx)(qt.a,{}),children:"Invoice"})})})}}];function At(){var e=r.useState([]),t=Object(le.a)(e,2),a=t[0],n=t[1],c=r.useState(0),s=Object(le.a)(c,2),i=s[0],o=s[1],u=r.useState("idle"),l=Object(le.a)(u,2),j=l[0],d=l[1],b=r.useState(1),m=Object(le.a)(b,2),h=m[0],p=m[1],O=r.useState(10),g=Object(le.a)(O,1)[0],v=r.useCallback(Object(L.a)(q.a.mark((function e(){var t,a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d("process"),e.next=3,lt({limit:g,page:h});case 3:if(t=e.sent,!(a=t.data).error){e.next=8;break}return d("error"),e.abrupt("return");case 8:d("success"),n(a.data),o(a.count);case 11:case"end":return e.stop()}}),e)}))),[h,g]);return r.useEffect((function(){v()}),[v]),Object(f.jsxs)(x.j,{children:[Object(f.jsx)(w,{}),Object(f.jsx)(x.s,{as:"h3",children:"Pesanan anda"}),Object(f.jsx)("br",{}),Object(f.jsx)(x.r,{items:a,totalItems:i,columns:Lt,onPageChange:function(e){return p(e)},page:h,isLoading:"process"===j})]})}function Bt(){var e=Object(o.g)(),t=Object(v.b)();return r.useEffect((function(){(function(){return ge.apply(this,arguments)})().then((function(){return t(Te)})).then((function(){return e.push("/")}))}),[t,e]),Object(f.jsx)(x.j,{size:"small",children:Object(f.jsxs)("div",{className:"text-center flex flex-col justify-center items-center",children:[Object(f.jsx)(ft.BounceLoader,{color:"red"}),Object(f.jsx)("br",{}),"Logging out..."]})})}var Dt=a(57),Mt=function(e){var t=e.component,a=Object(Dt.a)(e,["component"]),r=Object(v.c)((function(e){return e.auth})).user;return Object(f.jsx)(o.b,Object(ue.a)(Object(ue.a)({},a),{},{children:r?Object(f.jsx)(t,{}):Object(f.jsx)(o.a,{to:"/login"})}))},Ht=function(e){var t=e.component,a=Object(Dt.a)(e,["component"]),r=Object(v.c)((function(e){return e.auth})).user;return Object(f.jsx)(o.b,Object(ue.a)(Object(ue.a)({},a),{},{children:r?Object(f.jsx)(o.a,{to:"/"}):Object(f.jsx)(t,{})}))},zt=a(46),Rt=a(93),Jt=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{user:null,token:null};var Kt=a(18),Gt="process",Ut="success",Ft="error",Vt={data:[],currentPage:1,totalItems:-1,perPage:6,keyword:"",category:"",tags:[],status:"idle"};var Xt=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[];var Wt,Yt,$t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||zt.c,Qt=Object(zt.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ce:return{user:t.user,token:t.token};case Ie:return{user:null,token:null};default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(ue.a)(Object(ue.a)({},e),{},{status:Gt});case B:return Object(ue.a)(Object(ue.a)({},e),{},{status:Ft});case D:return Object(ue.a)(Object(ue.a)({},e),{},{status:Ut,data:t.data,totalItems:t.count});case M:return Object(ue.a)(Object(ue.a)({},e),{},{currentPage:t.currentPage});case H:return Object(ue.a)(Object(ue.a)({},e),{},{keyword:t.keyword,category:"",tags:[]});case z:return Object(ue.a)(Object(ue.a)({},e),{},{currentPage:1,tags:[],category:t.category,keyword:""});case R:return Object(ue.a)(Object(ue.a)({},e),{},{tags:t.tags});case G:return e.tags.includes(t.tag)?Object(ue.a)(Object(ue.a)({},e),{},{currentPageL:1,tags:e.tags.filter((function(e){return e!==t.tag}))}):Object(ue.a)(Object(ue.a)({},e),{},{currentPage:1,tags:[].concat(Object(Kt.a)(e.tags),[t.tag])});case J:return Object(ue.a)(Object(ue.a)({},e),{},{currentPage:e.currentPage+1});case K:return Object(ue.a)(Object(ue.a)({},e),{},{currentPage:e.currentPage-1});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return e.find((function(e){return e._id===t.item._id}))?e.map((function(e){return Object(ue.a)(Object(ue.a)({},e),{},{qty:e._id===t.item._id?e.qty+1:e.qty})})):[].concat(Object(Kt.a)(e),[Object(ue.a)(Object(ue.a)({},t.item),{},{qty:1})]);case ee:return e.map((function(e){return Object(ue.a)(Object(ue.a)({},e),{},{qty:e._id===t.item._id?e.qty-1:e.qty})})).filter((function(e){return e.qty>0}));case te:return[];case ae:return t.items;default:return e}}}),Zt=Object(zt.d)(Qt,$t(Object(zt.a)(Rt.a)));function ea(e,t){return ta.apply(this,arguments)}function ta(){return(ta=Object(L.a)(q.a.mark((function e(t,a){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.put("".concat(d,"/api/carts"),{items:a},{headers:{authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aa(){return(aa=Object(L.a)(q.a.mark((function e(){var t,a,r,n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},a=t.token){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,F.a.get("".concat(d,"/api/carts"),{headers:{authorization:"Bearer ".concat(a)}});case 5:r=e.sent,(n=r.data).error||Zt.dispatch(ce(n));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ra(){var e=Wt,t=Yt;Wt=Zt.getState().auth,Yt=Zt.getState().cart;var a=Wt.token;JSON.stringify(Wt)!==JSON.stringify(e)&&(localStorage.setItem("auth",JSON.stringify(Wt)),ea(a,Yt)),Yt!==t&&(localStorage.setItem("cart",JSON.stringify(Yt)),ea(a,Yt))}var na=function(){return n.a.useEffect((function(){Zt.subscribe(ra),function(){aa.apply(this,arguments)}()}),[]),Object(f.jsx)(v.a,{store:Zt,children:Object(f.jsx)(i.a,{children:Object(f.jsxs)(o.d,{children:[Object(f.jsx)(Ht,{path:"/login",component:De}),Object(f.jsx)(Ht,{path:"/register/berhasil",component:_e}),Object(f.jsx)(Ht,{path:"/register",component:Se}),Object(f.jsx)(Mt,{path:"/alamat-pengiriman/tambah",component:We}),Object(f.jsx)(Mt,{path:"/alamat-pengiriman/",component:tt}),Object(f.jsx)(Mt,{path:"/checkout",component:xt}),Object(f.jsx)(Mt,{path:"/invoice/:order_id",component:kt}),Object(f.jsx)(Mt,{path:"/account",component:Et}),Object(f.jsx)(Mt,{path:"/pesanan",component:At}),Object(f.jsx)(o.b,{path:"/logout",component:Bt}),Object(f.jsx)(o.b,{path:"/",component:oe})]})})})},ca=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,165)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))};s.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(na,{})}),document.getElementById("root")),ca()},98:function(e,t,a){}},[[164,1,2]]]);
//# sourceMappingURL=main.3ca70315.chunk.js.map